:root {
    --bg: #0f172a;
    --panel: #111827;
    --panel-2: #0b1223;
    --text: #e5e7eb;
    --muted: #9ca3af;
    --primary: #3b82f6;
    --primary-700: #1d4ed8;
    --ring: rgba(59, 130, 246, 0.35);
    --radius: 14px;
    --shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
}

body {
    font-family: Arial, Helvetica, sans-serif;
    max-width: 900px; 
    margin: 2rem auto;
    background: radial-gradient(1200px 600px at 10% -10%, #1f2937 0%, var(--bg) 50%, #0b1020 100%);
    color: var(--text);
    background-repeat: no-repeat;
    min-height: 100vh;
    background-attachment: fixed;
    overflow: hidden;
    height: 100%;
}

.site-header {
    position: sticky;
    top: 0;
    background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: var(--radius);
    transition: box-shadow 0.3s ease, border-color 0.3s ease;
}

.site-header:hover {
    box-shadow: 0 8px 32px 0 rgba(59, 130, 246, 0.3), 0 0 20px rgba(59, 130, 246, 0.2);
    border-color: rgba(59, 130, 246, 0.3);
}

.nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 0;
}

.brand {
    font-weight: 700;
    color: #ffffff;
    text-decoration: none;
}

.nav-right {
    display: flex;
    gap: 12px;
}

.nav-link {
    color: var(--text);
    text-decoration: none;
    padding: 6px 10px;
    border-radius: 8px;
    transition: background 120ms ease, color 120ms ease;
}

.nav-link:hover {
    background: rgba(255,255,255,0.06);
    color: #ffffff;
}

.logout-link {
    color: #fecaca;
}

.logout-link:hover {
    background: rgba(239, 68, 68, 0.12);
    color: #ffcccc;
}

/* --- Stiluri Chat (Modificate) --- */
#chat { 
    /* Stiluri originale restaurate */
    height: 400px;
    overflow-y: auto;
    padding: 2rem 2.5rem;
    background: linear-gradient(120deg, rgba(17,24,39,0.85) 60%, rgba(59,130,246,0.08) 100%);
    border: 1.5px solid rgba(255,255,255,0.10);
    border-radius: var(--radius);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.18);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    transition: box-shadow 0.2s;

    /* Stiluri noi pentru layout flexibil (bule) */
    display: flex;
    flex-direction: column;
    gap: 8px; /* Spațiu între mesaje */
}

/* Efectul de hover pentru containerul de chat (restaurat din original) */
.panel:hover,
.dm-container:hover,
#chat:hover {
    box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.22);
}

/* --- Stiluri Noi pentru Bule --- */
.msg-bubble {
    max-width: 70%;
    padding: 8px 12px; /* Padding puțin mai mic pentru aspect compact */
    border-radius: 16px;
    font-size: 1em;
    line-height: 1.4;
    position: relative;
    word-break: break-word;
    box-shadow: 0 1px 2px rgba(0,0,0,0.03);

    /* Flexbox pentru layout vertical */
    display: flex;
    flex-direction: column;
}

.msg-sent {
    align-self: flex-end; /* Aliniere la dreapta */
    background: var(--primary);
    color: #fff;
    border-bottom-right-radius: 4px;
}

.msg-received {
    align-self: flex-start; /* Aliniere la stânga */
    background: rgba(59, 130, 246, 0.08); /* Ușor transparent */
    color: var(--text);
    border-bottom-left-radius: 4px;
}

.msg-text {
    white-space: pre-wrap;  /* Aici e locul corect: afectează doar textul */
    word-wrap: break-word;
}

/* Stil pentru numele expeditorului (doar la mesajele primite) */
.sender-name {
    font-size: 0.85em;
    font-weight: 700;
    margin-bottom: 4px;
    display: block;
}

.sender-name a {
    color: var(--primary);
    text-decoration: none;
}

.sender-name a:hover {
    text-decoration: underline;
}

/* --- Alte elemente --- */
.sys {
    color: var(--muted);
    font-style: italic;
    align-self: center; /* Opțional: centrează mesajele de sistem */
    margin: 5px 0;
}

.me {
    font-weight: 600;
}

#controls {
     margin-top: 1rem;
     display:flex;
     gap:8px;
}

#controls textarea {
    flex: 1; 
    padding: 10px 12px;
    border-radius: 10px;
    border: 1px solid rgba(255,255,255,0.12);
    background: rgba(3, 6, 23, 0.55);
    color: var(--text);
    outline: none;
    transition: border-color 160ms ease, box-shadow 160ms ease, background 160ms ease;
    
    /* MODIFICĂRI PENTRU SCROLL ȘI DIMENSIUNE FIXĂ */
    resize: none;        /* Ascunde colțul de tragere */
    height: 50px;        /* Înălțime fixă (poți pune 44px sau 60px după preferință) */
    overflow-y: auto;    /* Activează bara de scroll verticală */
    font-family: inherit;
    line-height: 1.4;
}

#controls textarea::placeholder {
    color: var(--muted);
}

#controls textarea:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 4px var(--ring);
    background: rgba(6, 10, 30, 0.7);
}

#controls button {
    padding:10px 12px;
    border-radius:10px;
    border: 1px solid rgba(255,255,255,0.12);
    background: linear-gradient(180deg, var(--primary) 0%, var(--primary-700) 100%);
    color:#fff;
    font-weight:600;
    cursor:pointer;
    transition: transform 120ms ease, filter 160ms ease;
}

#controls button:hover { 
    transform: translateY(-1px);
    filter: brightness(1.05);
}

.username-link {
    color: var(--primary);
    text-decoration: none;
    font-weight: 600;
}

.upload-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px; /* Același cu înălțimea minimă a textarea */
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.12);
    border-radius: 10px;
    cursor: pointer;
    font-size: 1.5rem;
    color: var(--text);
    transition: background 0.2s;
}

.upload-btn:hover {
    background: rgba(255, 255, 255, 0.2);
}

/* Imaginile din chat */
.chat-image {
    display: block;
    max-width: 100%;
    max-height: 300px;
    border-radius: 8px;
    margin-bottom: 5px;
    cursor: pointer;
}

.msg-time {
    align-self: flex-end; /* Împinge ora în dreapta */
    font-size: 0.65em;    /* Font mic, ca în screenshot */
    color: rgba(255, 255, 255, 0.7); /* Ușor transparent */
    margin-top: 2px;      /* Spațiu mic față de text */
    line-height: 1;       /* Înălțime rând compactă */
    
    /* Opțional: Ajustare fină pentru a fi mai aproape de colț */
    margin-bottom: -2px;
}

/* Ajustare culoare oră pentru mesajele primite (dacă fundalul e deschis) */
.msg-received .msg-time {
    color: rgba(205, 200, 200, 0.629);
}