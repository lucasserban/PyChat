{% extends "base.html" %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}" />
{% endblock %}

{% block content %}
  <h1>Global Chat</h1>
    <div id="chat">
        {% for msg in history %}
            <div class="msg-bubble {{ 'msg-sent' if msg.username == username else 'msg-received' }}">
                {# Afișăm numele doar dacă mesajul este de la altcineva #}
                {% if msg.username != username %}
                    <div class="sender-name">
                        <a href="{{ url_for('profile', username=msg.username) }}">
                            {{ msg.username }}
                        </a>
                    </div>
                {% endif %}
                {{ msg.msg }}
            </div>
    {% endfor %}
  </div>
  <div id="controls">
    <input id="message" type="text" placeholder="Type a message..." autocomplete="off" />
    <button id="send">Send</button>
  </div>
  
  <script>
    window.currentUsername = "{{ username }}";
  </script>
{% endblock %}

{% block script %}
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
{% endblock %}